<section class="max-w-xl mx-auto space-y-6 animate-fadeIn">
  <header class="page-hero space-y-2">
    <span class="hero-badge text-horriver-gray">
      <span class="hero-icon">AC</span>
      Conta
    </span>
    <h1 class="font-title text-3xl text-horriver-light">Trocar senha</h1>
    <p class="text-sm text-horriver-gray">
      Atualize sua senha de acesso ao painel admin.
    </p>
  </header>

  <% if (error) { %>
    <div class="rounded-xl border border-red-500/60 bg-red-900/20 px-4 py-3 text-sm text-red-200">
      <%= error %>
    </div>
  <% } %>

  <% if (success) { %>
    <div class="rounded-xl border border-emerald-400/60 bg-emerald-900/20 px-4 py-3 text-sm text-emerald-200">
      Senha atualizada com sucesso.
    </div>
  <% } %>

  <form method="POST" action="/admin/senha" class="space-y-4">
    <label class="block text-sm text-horriver-gray">
      Senha atual
      <input
        type="password"
        name="currentPassword"
        data-password-field
        required
        class="mt-1 w-full rounded-xl bg-black/40 border border-horriver-border px-4 py-2 text-horriver-light"
      />
    </label>

    <label class="block text-sm text-horriver-gray">
      Nova senha
      <input
        type="password"
        name="newPassword"
        data-password-field
        required
        minlength="6"
        class="mt-1 w-full rounded-xl bg-black/40 border border-horriver-border px-4 py-2 text-horriver-light"
      />
    </label>

    <label class="block text-sm text-horriver-gray">
      Confirmar nova senha
      <input
        type="password"
        name="confirmPassword"
        data-password-field
        required
        minlength="6"
        class="mt-1 w-full rounded-xl bg-black/40 border border-horriver-border px-4 py-2 text-horriver-light"
      />
    </label>

    <label class="inline-flex items-center gap-2 text-xs text-horriver-gray">
      <input type="checkbox" id="toggle-password-visibility" class="rounded border-horriver-border bg-black/40" />
      Mostrar senhas
    </label>

    <div class="pt-2">
      <button
        type="submit"
        data-submit-label="Salvando..."
        class="w-full sm:w-auto px-6 py-2 rounded-full bg-horriver-orange text-black font-semibold"
      >
        Salvar nova senha
      </button>
    </div>
  </form>
</section>

<script>
  (function () {
    const toggle = document.getElementById("toggle-password-visibility");
    if (!toggle) return;
    const fields = document.querySelectorAll("[data-password-field]");
    const setType = (type) => {
      fields.forEach((field) => {
        field.type = type;
      });
    };
    toggle.addEventListener("change", () => {
      setType(toggle.checked ? "text" : "password");
    });
  })();
</script>
